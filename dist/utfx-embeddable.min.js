var utfx=function(){var e={encodeUTF8:function(a,c){var b=null;"number"===typeof a&&(b=a,a=function(){return null});if("function"!==typeof a||"function"!==typeof c)throw TypeError("Illegal arguments: "+typeof a+", "+typeof c);for(;null!==b||null!==(b=a());)128>b?c(b&127):(2048>b?c(b>>6&31|192):(65536>b?c(b>>12&15|224):(c(b>>18&7|240),c(b>>12&63|128)),c(b>>6&63|128)),c(b&63|128)),b=null},decodeUTF8:function(a,c){if("function"!==typeof a||"function"!==typeof c)throw TypeError("Illegal arguments: "+
typeof a+", "+typeof c);for(var b,d,f,g,h=function(a){throw e.TruncatedError(a.slice(0,a.indexOf(null)));};null!==(b=a());)if(0===(b&128))c(b);else if(192===(b&224))null===(d=a())&&h([b,d]),c((b&31)<<6|d&63);else if(224===(b&240))null!==(d=a())&&null!==(f=a())||h([b,d,f]),c((b&15)<<12|(d&63)<<6|f&63);else if(240===(b&248))null!==(d=a())&&null!==(f=a())&&null!==(g=a())||h([b,d,f,g]),c((b&7)<<18|(d&63)<<12|(f&63)<<6|g&63);else throw RangeError("Illegal starting byte: "+b);},UTF16toUTF8:function(a,c){if("function"!==
typeof a||"function"!==typeof c)throw TypeError("Illegal arguments: "+typeof a+", "+typeof c);for(var b,d=null;null!==(b=null!==d?d:a());)55296<=b&&57343>=b&&null!==(d=a())&&56320<=d&&57343>=d?(c(1024*(b-55296)+d-56320+65536),d=null):c(b);null!==d&&c(d)},UTF8toUTF16:function(a,c){var b=null;"number"===typeof a&&(b=a,a=function(){return null});if("function"!==typeof a||"function"!==typeof c)throw TypeError("Illegal arguments: "+typeof a+", "+typeof c);for(;null!==b||null!==(b=a());)65535>=b?c(b):(b-=
65536,c((b>>10)+55296),c(b%1024+56320)),b=null},encodeUTF16toUTF8:function(a,c){if("function"!==typeof c)throw TypeError("Illegal arguments: "+typeof a+", "+typeof c);e.UTF16toUTF8(a,function(a){e.encodeUTF8(a,c)})},decodeUTF8toUTF16:function(a,c){if("function"!==typeof c)throw TypeError("Illegal arguments: "+typeof a+", "+typeof c);e.decodeUTF8(a,function(a){e.UTF8toUTF16(a,c)})},assertByte:function(a){if("number"!==typeof a||a!==a)throw TypeError("Illegal byte: "+typeof a);if(-128>a||255<a)throw RangeError("Illegal byte: "+
a);return a},assertCharCode:function(a){if("number"!==typeof a||a!==a)throw TypeError("Illegal char code: "+typeof a);if(0>a||65535<a)throw RangeError("Illegal char code: "+a);return a},assertCodePoint:function(a){if("number"!==typeof a||a!==a)throw TypeError("Illegal code point: "+typeof a);if(0>a||1114111<a)throw RangeError("Illegal code point: "+a);return a},calculateCodePoint:function(a){return 128>a?1:2048>a?2:65536>a?3:4},calculateUTF8:function(a){if("function"!==typeof a)throw TypeError("Illegal arguments: "+
typeof a);for(var c,b=0;null!==(c=a());)b+=e.calculateCodePoint(c);return b},calculateUTF16asUTF8:function(a){var c=0,b=0;e.UTF16toUTF8(a,function(a){++c;b+=e.calculateCodePoint(a)});return[c,b]},TruncatedError:function(a){if(!(this instanceof e.TruncatedError))return new e.TruncatedError(a);Error.call(this);this.name="TruncatedError";this.message=a.join(", ");this.bytes=a}};e.TruncatedError.prototype=Error();return e}();
